<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

    <!-- Libs -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script src="lib/XMLWriter/XMLWriter.js"></script>
    <script src="lib/moment/moment.min.js"></script>
    <script src="lib/FileSaver/FileSaver.min.js"></script>

    <!-- Base Blockly-->
    <script src="lib/blockly/blockly_uncompressed.js"></script>
    <script src="lib/blockly/msg/js/en-gb.js"></script>

    <!-- Generators -->
    <script src="lib/blockly/javascript_compressed.js"></script>
    <script src="lib/blockly/dart_compressed.js"></script>
    <script src="js/generators/structured_text.js"></script>

    <!-- Blocks Definitions -->
    <script src="js/blocks/lists.js"></script>
    <script src="js/blocks/logic.js"></script>
    <script src="js/blocks/loops.js"></script>
    <script src="js/blocks/math.js"></script>
    <script src="js/blocks/procedures.js"></script>
    <script src="js/blocks/text.js"></script>
    <script src="js/blocks/variables.js"></script>
    <script src="js/blocks/variables_dynamic.js"></script>
    <script src="js/blocks/conversions.js"></script>
    <script src="js/blocks/bit.js"></script>
    <script src="js/blocks/time_date.js"></script>
    <script src="js/blocks/function_blocks.js"></script>

    <!-- Generators -->
    <script src="js/generators/structured_text/logic.js"></script>
    <script src="js/generators/structured_text/loops.js"></script>
    <script src="js/generators/structured_text/math.js"></script>
    <script src="js/generators/structured_text/bit.js"></script>
    <script src="js/generators/structured_text/variables.js"></script>
    <script src="js/generators/structured_text/text.js"></script>
    <script src="js/generators/structured_text/procedures.js"></script>
    <script src="js/generators/structured_text/conversions.js"></script>
    <script src="js/generators/structured_text/time_date.js"></script>
    <script src="js/generators/structured_text/function_blocks.js"></script>



    <!-- Editor logic -->
    <script src="js/xml_exporter.js"></script>
    <script src="js/editor.js"></script>

    <title>Document</title>
</head>
<input type="file" style="display: none;" id="openFile"/>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Blockly PLC</a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarProject" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Project
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="#">New</a>
                    <a class="dropdown-item" href="#" onclick="Editor.loadProject()">Load</a>
                    <a class="dropdown-item" href="#" onclick="Editor.saveProject()">Save</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarEdit" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Edit
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" onclick="Editor.newVariable()" href="#">New variable</a>
                    <a class="dropdown-item" href="#">Settings</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarExport" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Export
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="#" onclick="Editor.exportAsSt()">As .st</a>
                    <a class="dropdown-item" href="#" onclick="Editor.exportAsXml()">As PLCOpen XML</a>
                </div>
            </li>
           <li class="nav-item">
               <a class="nav-link" href="#" onclick="Editor.devGenerateXml()">Generate</a>
           </li>
        </ul>
    </div>
</nav>
<div class="container-fluid">
    <div id="blocklyArea" style="width: 900px; height: 900px; display: inline-block;"></div>
    <textarea id="output" style="height: 900px; width: 300px; border: solid 1px gray;"></textarea>
</div>
<!-- modals -->
<div class="modal" tabindex="-1" role="dialog" id="variableDialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">New variable</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="newVariableForm">
                    <div class="form-group">
                        <label for="variableName">Name</label>
                        <input name="name" required type="email" class="form-control" id="variableName" placeholder="Enter variable name">
                    </div>
                    <div class="form-group">
                        <label for="variableType">Type</label>
                        <select name="type" required class="form-control" id="variableType">
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="variableInitValue">Initial value</label>
                        <input name="value" type="email" class="form-control" id="variableInitValue" placeholder="Enter initial value or leave blank">
                    </div>
                    <div class="form-group">
                        <label for="variableAddress">Address</label>
                        <input name="value" type="email" class="form-control" id="variableAddress" placeholder="Enter the input/output address">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="Editor.createNewVariable()">Create</button>
            </div>
        </div>
    </div>
</div>

<!-- toolbox -->
<xml id="toolbox" style="display: none">
    <category name="Logic" colour="%{BKY_LOGIC_HUE}">
        <block type="controls_if"></block>
        <block type="logic_compare"></block>
        <block type="logic_operation"></block>
        <block type="logic_negate"></block>
        <block type="logic_boolean"></block>
        <block type="logic_switch">
            <mutation matches="1" default="1"></mutation>
        </block>
        <block type="logic_ternary"></block>
    </category>
    <category name="Loops" colour="%{BKY_LOOPS_HUE}">
        <block type="controls_repeat_ext">
            <value name="TIMES">
                <shadow type="math_number">
                    <field name="NUM">10</field>
                </shadow>
            </value>
        </block>
        <block type="controls_whileUntil"></block>
        <block type="controls_do"></block>
        <block type="controls_for">
            <value name="FROM">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="TO">
                <shadow type="math_number">
                    <field name="NUM">10</field>
                </shadow>
            </value>
            <value name="BY">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
        </block>
        <block type="controls_forEach"></block>
        <block type="controls_flow_statements"></block>
    </category>
    <category name="Math" colour="%{BKY_MATH_HUE}">
        <block type="math_number">
            <field name="NUM">123</field>
        </block>
        <block type="math_arithmetic">
            <value name="A">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="B">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
        </block>
        <block type="math_single">
            <value name="NUM">
                <shadow type="math_number">
                    <field name="NUM">9</field>
                </shadow>
            </value>
        </block>
        <block type="math_trig">
            <value name="NUM">
                <shadow type="math_number">
                    <field name="NUM">45</field>
                </shadow>
            </value>
        </block>
        <block type="math_constant"></block>
        <block type="math_number_property">
            <value name="NUMBER_TO_CHECK">
                <shadow type="math_number">
                    <field name="NUM">0</field>
                </shadow>
            </value>
            <value name="DIVISOR">
                <shadow type="math_number">
                    <field name="NUM">10</field>
                </shadow>
            </value>
        </block>
        <block type="math_modulo">
            <value name="DIVIDEND">
                <shadow type="math_number">
                    <field name="NUM">64</field>
                </shadow>
            </value>
            <value name="DIVISOR">
                <shadow type="math_number">
                    <field name="NUM">10</field>
                </shadow>
            </value>
        </block>
        <block type="math_constrain">
            <value name="VALUE">
                <shadow type="math_number">
                    <field name="NUM">50</field>
                </shadow>
            </value>
            <value name="LOW">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="HIGH">
                <shadow type="math_number">
                    <field name="NUM">100</field>
                </shadow>
            </value>
        </block>
        <block type="math_max">
            <mutation inputs="2"></mutation>
        </block>
        <block type="math_min">
            <mutation inputs="2"></mutation>
        </block>
        <block type="math_mux">
            <mutation inputs="2"></mutation>
        </block>
    </category>
    <category name="Text" colour="%{BKY_TEXTS_HUE}">
        <block type="text"></block>
        <block type="text_join"></block>
        <block type="text_append">
            <value name="TEXT">
                <shadow type="text"></shadow>
            </value>
        </block>
        <block type="text_prepend">
            <value name="TEXT">
                <shadow type="text"></shadow>
            </value>
        </block>
        <block type="text_length">
            <value name="VALUE">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_isEmpty">
            <value name="VALUE">
                <shadow type="text">
                    <field name="TEXT"></field>
                </shadow>
            </value>
        </block>
        <block type="text_indexOf">
            <value name="VALUE">
                <block type="variables_get">
                    <field name="VAR">{textVariable}</field>
                </block>
            </value>
            <value name="FIND">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_charAt">
            <value name="VALUE">
                <block type="variables_get">
                    <field name="VAR">{textVariable}</field>
                </block>
            </value>
        </block>
        <block type="text_getSubstring">
            <value name="STRING">
                <block type="variables_get">
                    <field name="VAR">{textVariable}</field>
                </block>
            </value>
        </block>
        <block type="text_replace">
            <value name="TEXT">
                <block type="variables_get">
                    <field name="VAR">{textVariable}</field>
                </block>
            </value>
        </block>
        <block type="text_delete">
            <value name="TEXT">
                <block type="variables_get">
                    <field name="VAR">{textVariable}</field>
                </block>
            </value>
        </block>
        <block type="text_changeCase">
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_trim">
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_print">
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_prompt_ext">
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
    </category>
    <category name="List" colour="%{BKY_LISTS_HUE}">
        <block type="lists_create_with">
            <mutation items="0"></mutation>
        </block>
        <block type="lists_create_with"></block>
        <block type="lists_repeat">
            <value name="NUM">
                <shadow type="math_number">
                    <field name="NUM">5</field>
                </shadow>
            </value>
        </block>
        <block type="lists_length"></block>
        <block type="lists_isEmpty"></block>
        <block type="lists_indexOf">
            <value name="VALUE">
                <block type="variables_get">
                    <field name="VAR">{listVariable}</field>
                </block>
            </value>
        </block>
        <block type="lists_getIndex">
            <value name="VALUE">
                <block type="variables_get">
                    <field name="VAR">{listVariable}</field>
                </block>
            </value>
        </block>
        <block type="lists_setIndex">
            <value name="LIST">
                <block type="variables_get">
                    <field name="VAR">{listVariable}</field>
                </block>
            </value>
        </block>
        <block type="lists_getSublist">
            <value name="LIST">
                <block type="variables_get">
                    <field name="VAR">{listVariable}</field>
                </block>
            </value>
        </block>
        <block type="lists_split">
            <value name="DELIM">
                <shadow type="text">
                    <field name="TEXT">,</field>
                </shadow>
            </value>
        </block>
        <block type="lists_sort"></block>
    </category>
    <category name="Other" colour="%{BKY_LISTS_HUE}">
        <block type="bit_shift"></block>
        <block type="procedures_program"></block>
        <block type="variables_local"></block>
        <block type="variables_global"></block>
    </category>
    <category name="Conversions" colour="%{BKY_COLOUR_HUE}">
        <block type="conversion_general"></block>
        <block type="conversion_trunc"></block>
        <block type="conversion_to_bcd"></block>
        <block type="conversion_from_bcd"></block>
    </category>
    <category name="Time and Date" colour="%{BKY_COLOUR_HUE}">
        <block type="time_value"></block>
        <block type="date_value"></block>
        <block type="time_of_day_value"></block>
        <block type="date_and_time_value"></block>
    </category>
    <category name="Function Blocks" colour="%{BKY_COLOUR_HUE}">
        <category name="Bistable">
            <block type="function_block_sr"></block>
            <block type="function_block_rs"></block>
        </category>
        <category name="Timer">
            <block type="function_block_ton"></block>
            <block type="function_block_tof"></block>
            <block type="function_block_tp"></block>
        </category>
        <category name="Counter"></category>
        <category name="Trigger"></category>
        <category name="Misc"></category>
    </category>
    <sep></sep>
    <category name="Variables" colour="%{BKY_VARIABLES_HUE}" custom="VARIABLE"></category>
    <category name="Functions" colour="%{BKY_PROCEDURES_HUE}" custom="PROCEDURE"></category>
</xml>
</body>
</html>